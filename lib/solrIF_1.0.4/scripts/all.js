var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.compFacetCount=function(t,e){return t.c>e.c?-1:t.c<e.c?1:0},ZIMT.UTILS.compMenu=function(t,e){return t.on!=e.on?t.on&&!e.on?-1:1:t.c>e.c?-1:t.c<e.c?1:0},ZIMT.UTILS.isObjEmpty=function(t){return 0===Object.keys(t).length&&t.constructor===Object},ZIMT.UTILS.isObjNOTEmpty=function(t){return!ZIMT.UTILS.isObjEmpty(t)},ZIMT.UTILS.initCollapse=function(){var t,e;for(t in ZIMT.DATA.StartValues.jCollapse)e=ZIMT.DATA.StartValues.jCollapse[t],"off"==e?jQuery("#"+t).collapse("hide"):jQuery("#"+t).collapse("show")},ZIMT.UTILS.UrlParams=ZIMT.UTILS.UrlParams||{},ZIMT.UTILS.UrlParams.objParams={},ZIMT.UTILS.UrlParams.isParsed=!1,ZIMT.UTILS.UrlParams.init=function(t){if(!ZIMT.UTILS.UrlParams.isParsed){ZIMT.UTILS.UrlParams.isParsed=!0;for(var e,i=/\+/g,r=/([^&=]+)=?([^&]*)/g,a=function(t){return decodeURIComponent(t.replace(i," "))},s=t.substring(1);e=r.exec(s);)ZIMT.UTILS.UrlParams.objParams[a(e[1])]=a(e[2]);ZIMT.UTILS.UrlParams.objParams.hasOwnProperty("locale")||(ZIMT.UTILS.UrlParams.objParams.locale=ZIMT.DATA.DefaultValues.strDefaultLang)}},ZIMT.UTILS.FacetManager=function(){this.__list={}},ZIMT.UTILS.FacetManager.prototype.sortGrp=function(t){var e=this.__list[t].data;e.sort(ZIMT.UTILS.compMenu)},ZIMT.UTILS.FacetManager.prototype.itemExists=function(t,e){for(var i=0;i<t.length;i++)if(t[i].name===e)return t[i];return!1},ZIMT.UTILS.FacetManager.prototype.pushItem=function(t,e,i,r){this.setGroup(t,e),this.setItem(e,i,r)},ZIMT.UTILS.FacetManager.prototype.setItem=function(t,e,i){var r=this.__list[t].data,a=this.itemExists(r,e);a?a.c=i:r.push({name:e,displayname:ZIMT.DATA.Session.langMgr.mkDisplayname(t,e),c:i,on:!1,fq:t+":"+e,f:t})},ZIMT.UTILS.FacetManager.prototype.setItemOn=function(t,e){var i="field";this.setGroup(i,t);var r=this.__list[t].data,a=this.itemExists(r,e);a?a.on=!0:r.push({name:e,displayname:ZIMT.DATA.Session.langMgr.mkDisplayname(t,e),c:0,on:!0,fq:t+":"+e,f:t})},ZIMT.UTILS.FacetManager.prototype.setItemOff=function(t,e){var i="field";this.setGroup(i,t);var r=this.__list[t].data,a=this.itemExists(r,e);a&&(a.on=!1)},ZIMT.UTILS.FacetManager.prototype.setGroup=function(t,e){return!this.__list.hasOwnProperty(e)&&(this.__list[e]={data:[],type:t,allselected:!1},!0)},ZIMT.UTILS.FacetManager.prototype.toggleFacet=function(t,e){var i=this.itemExists(this.getGroupData(t),e);i.on?i.on=!1:i.on=!0},ZIMT.UTILS.FacetManager.prototype.toggleGroupOn=function(t){this.setGroup("field",t);var e=!this.isGroupAllselected(t);this.setGroupAllselected(t,e);for(var i=0;i<this.__list[t].data.length;i++){var r=this.__list[t].data[i];r.on=e}},ZIMT.UTILS.FacetManager.prototype.setGroupOn=function(t,e){this.setGroup("field",t),this.setGroupAllselected(t,e);for(var i=0;i<this.__list[t].data.length;i++){var r=this.__list[t].data[i];r.on=e}},ZIMT.UTILS.FacetManager.prototype.setAllGroupsOn=function(t){for(var e=ZIMT.DATA.DefaultValues.arrFildFacets,i=0;i<e.length;i++){var r=e[i];this.setGroupOn(r,t)}},ZIMT.UTILS.FacetManager.prototype.getGroupData=function(t){return void 0===this.__list[t]?[]:this.__list[t].data},ZIMT.UTILS.FacetManager.prototype.isGroupAllselected=function(t){return void 0!==this.__list[t]&&this.__list[t].allselected},ZIMT.UTILS.FacetManager.prototype.setGroupAllselected=function(t,e){void 0===this.__list[t]?console.log("Error setGroupAllselected "+t+" is empty!"):this.__list[t].allselected=e},ZIMT.UTILS.FacetManager.prototype.getGroupMetaData=function(t){var e={},i=0,r=!1;if(void 0===this.__list[t])return console.log("Error Metadata Group "+t+" is empty!"),[];for(var a=0;a<this.__list[t].data.length;a++)this.__list[t].data[a].on&&i++;return i>0&&(r=!0),e.all=this.__list[t].data.length,e.on=i,e.bon=r,e},ZIMT.UTILS.FacetManager.prototype.getFilterQueries=function(t){for(var e=ZIMT.DATA.DefaultValues.arrFildFacets,i=new ZIMT.UTILS.FilterQueryString,r=0;r<e.length;r++){var a,s=e[r];if(a=this.getGroupData(s),t!=s)for(var n=0;n<a.length;n++){var o=a[n];o.on&&i.pushItem(o.f,o.name)}}return i.getString()},ZIMT.UTILS.FacetManager.prototype.getGroupSelectedItems=function(t){for(var e=[],i=this.getGroupData(t),r=0;r<i.length;r++){var a=i[r];a.on&&e.push(a.name)}return e},ZIMT.UTILS.FacetManager.prototype.serializeData=function(){console.log(JSON.stringify(this.__list))},ZIMT.UTILS.FacetManager.prototype.setDebugData=function(){this.__list.dc_contributor={},this.__list.dc_contributor.data=[],this.__list.dc_contributor.type="fieldfacet",this.__list.dc_contributor.data.push({name:"Universit�tsbibliothek",c:428,on:!0}),this.__list.dc_contributor.data.push({name:"Franz-Nabl-Institut f�r Literaturforschung",c:428,on:!0})},ZIMT.UTILS.FilterQueryString=function(){this.__queryArr=[]},ZIMT.UTILS.FilterQueryString.prototype.pushItem=function(t,e){this.__queryArr.push([t,e])},ZIMT.UTILS.FilterQueryString.prototype.getFieldCount=function(t,e){for(var i=t[e][0],r=0,a=e+1;a<t.length&&i==t[a][0];a++)r++;return r},ZIMT.UTILS.FilterQueryString.prototype.getString=function(){if(this.__queryArr.length>0){var t=0;this.__result="&fq=",this.__tmp="";for(var e=0;e<this.__queryArr.length;e++){this.__tmp+="(";var i=this.__queryArr[e];if(t=this.getFieldCount(this.__queryArr,e),0==t)this.__tmp+=i[0]+':"'+i[1]+'"';else{for(var r=0;r<t+1;r++)i=this.__queryArr[e+r],this.__tmp+=i[0]+':"'+i[1]+'"',r<t&&(this.__tmp+=" OR ");e+=t}this.__tmp+=")",e<this.__queryArr.length-1&&(this.__tmp+=" AND ")}return this.__tmp=encodeURIComponent(this.__tmp),this.__result+=this.__tmp,this.__result}return""};var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.TimeManager=function(){this.__timeData=[-350,2020],void 0!==ZIMT.DATA.StartValues.timeRangeMin&&(this.__timeData[0]=ZIMT.DATA.StartValues.timeRangeMin),void 0!==ZIMT.DATA.StartValues.timeRangeMax&&(this.__timeData[1]=ZIMT.DATA.StartValues.timeRangeMax)},ZIMT.UTILS.TimeManager.prototype.serializeData=function(){console.log("{min:"+this.__timeData[0]+",max:"+this.__timeData[1]+"}")},ZIMT.UTILS.TimeManager.prototype.setMin=function(t){this.__timeData[0]=t},ZIMT.UTILS.TimeManager.prototype.getMin=function(){return this.__timeData[0]},ZIMT.UTILS.TimeManager.prototype.setMax=function(t){this.__timeData[1]=t},ZIMT.UTILS.TimeManager.prototype.getMax=function(){return this.__timeData[1]},ZIMT.UTILS.TimeManager.prototype.setTime=function(t){this.__timeData[0]=t[0],this.__timeData[1]=t[1]},ZIMT.UTILS.TimeManager.prototype.getFilterQueries=function(t){return t?(this.__timeData[0]==this.__timeData[1]&&this.__timeData[1]++,this.__timeData[0]<this.__timeData[1]?"&fq={!field f=dct_created_yearrange op=Intersects}["+this.__timeData[0]+" TO "+this.__timeData[1]+"]":"&fq={!field f=dct_created_yearrange op=Intersects}["+this.__timeData[1]+" TO "+this.__timeData[0]+"]"):""},ZIMT.UTILS.TimeRangeVisibilityManager=function(){},ZIMT.UTILS.TimeRangeVisibilityManager.prototype.init=function(t){this.__classVisibility=t},ZIMT.UTILS.TimeRangeVisibilityManager.prototype.setShow=function(){this.__classVisibility.timerangeOnClass="show"},ZIMT.UTILS.TimeRangeVisibilityManager.prototype.setHide=function(){this.__classVisibility.timerangeOnClass="hide"},ZIMT.UTILS.TimeRangeVisibilityManager.prototype.reset=function(){this.setHide()},ZIMT.UTILS.TimeRangeVisibilityManager.prototype.debug=function(){console.log(this.__classVisibility.timerangeOnClass)};var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.Querytext=ZIMT.UTILS.Querytext=function(){this.ENCODE=!0,this.DONOTENCODE=!1,this.ISQUERY=!0,this.ISNOTQUERY=!1,this.__bFirstTextQuery=!0,this.__bIsHighlight=!1,ZIMT.UTILS.initCollapse()},ZIMT.UTILS.Querytext.prototype.__getTextQuery=function(t,e){var i="";return t?(i=t.replace(":","\\:"),e?encodeURIComponent(i):t):"*"},ZIMT.UTILS.Querytext.prototype.__getStartQueryPids=function(){if(void 0===ZIMT.DATA.StartValues.arrStartQuery||0==ZIMT.DATA.StartValues.arrStartQuery.length)return this.__bIsHighlight=!1,"*:*";var t=ZIMT.DATA.StartValues.arrStartQuery[0];if(1==ZIMT.DATA.StartValues.arrStartQuery.length)return encodeURIComponent(t);for(var e=1;e<ZIMT.DATA.StartValues.arrStartQuery.length;e++){ZIMT.DATA.StartValues.arrStartQuery[e];t+=" OR ",t+=ZIMT.DATA.StartValues.arrStartQuery[e]}return encodeURIComponent(t)},ZIMT.UTILS.Querytext.prototype.getTextQuery4Query=function(t,e,i){return this.__bFirstTextQuery?(i&&(this.__bFirstTextQuery=!1,this.__bIsHighlight=!0),this.__getStartQueryPids()):(this.__bIsHighlight=!1,this.__getTextQuery(t,e))},ZIMT.UTILS.Querytext.prototype.getTextQuery4Facet=function(t,e){return this.__getTextQuery(t,e)},ZIMT.UTILS.Querytext.prototype.isHighlight=function(){return this.__bIsHighlight},ZIMT.UTILS.Querytext.prototype.turnOffHighlight=function(){this.__bFirstTextQuery=!1,this.__bIsHighlight=!1},ZIMT.UTILS.Querytext.prototype.turnOnHighlight=function(){this.__bFirstTextQuery=!0,this.__bIsHighlight=!0};var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.PaginationManager=function(){this.__iStepSize=ZIMT.DATA.DefaultValues.iPagStepSize,this.__nrVisPages=7,this.__nrPages=0,this.__currentPage=0,this.enumMode={FIRST:0,LAST:1,IN:2,SHORT:3},this.__mode=this.enumMode.FIRST},ZIMT.UTILS.PaginationManager.prototype.init=function(){this.__currentPage=0},ZIMT.UTILS.PaginationManager.prototype.reset=function(t,e){this.__nrPages=Math.ceil(t/this.__iStepSize),this.decideType()},ZIMT.UTILS.PaginationManager.prototype.set=function(t){this.__currentPage=t},ZIMT.UTILS.PaginationManager.prototype.up=function(){this.__currentPage<this.__nrPages-1?this.__currentPage++:console.log("ERROR PaginationManager: upper bound reached!")},ZIMT.UTILS.PaginationManager.prototype.down=function(){this.__currentPage>0?this.__currentPage--:console.log("ERROR PaginationManager: lower bound reached!")},ZIMT.UTILS.PaginationManager.prototype.first=function(){},ZIMT.UTILS.PaginationManager.prototype.last=function(){},ZIMT.UTILS.PaginationManager.prototype.getCurrPag=function(){var t={pag:[],pagvis:!0},e={page:"«",link:"down",nr:0},i={page:"»",link:"up",nr:0};return this.__isSinglePage()&&(t.pagvis=!1),this.__mode===this.enumMode.FIRST?(t.pag.push(e),this.__getNumberItems(t.pag),t.pag.push({page:"..",link:"..",nr:0}),t.pag.push(i)):this.__mode===this.enumMode.LAST?(t.pag.push(e),t.pag.push({page:"..",link:"..",nr:0}),this.__getNumberItems(t.pag),t.pag.push(i)):this.__mode===this.enumMode.IN?(t.pag.push(e),t.pag.push({page:"..",link:"..",nr:0}),this.__getNumberItems(t.pag),t.pag.push({page:"..",link:"..",nr:0}),t.pag.push(i)):this.__mode===this.enumMode.SHORT&&(t.pag.push(e),this.__getNumberItems(t.pag),t.pag.push(i)),t},ZIMT.UTILS.PaginationManager.prototype.getCurrPage=function(){return this.__currentPage},ZIMT.UTILS.PaginationManager.prototype.getQuery=function(){var t=this.__currentPage*this.__iStepSize;return"&start="+t+"&rows="+this.__iStepSize},ZIMT.UTILS.PaginationManager.prototype.__getItemText=function(t){var e={};return e.page=t+1,e.link="set",e.nr=t,t==this.__currentPage&&(e.class="active"),e},ZIMT.UTILS.PaginationManager.prototype.__getNumberItems=function(t){if(this.__mode===this.enumMode.FIRST)for(var e=0;e<this.__nrPages&&(t.push(this.__getItemText(e)),!(e+1>=this.__nrVisPages));e++);else if(this.__mode===this.enumMode.LAST)for(var i=this.__nrPages-this.__nrVisPages,e=i;e<this.__nrPages&&(t.push(this.__getItemText(e)),!(e+1>=this.__nrPages));e++);else if(this.__mode===this.enumMode.IN)for(var i=this.__currentPage-3,e=i;e<this.__nrPages&&(t.push(this.__getItemText(e)),!(e+1>=this.__nrVisPages+i));e++);else if(this.__mode===this.enumMode.SHORT)for(var e=0;e<this.__nrPages;e++)t.push(this.__getItemText(e))},ZIMT.UTILS.PaginationManager.prototype.decideType=function(){this.__nrPages<=this.__nrVisPages?this.__mode=this.enumMode.SHORT:this.__currentPage<this.__nrVisPages-1?this.__mode=this.enumMode.FIRST:this.__currentPage>this.__nrPages-this.__nrVisPages?this.__mode=this.enumMode.LAST:this.__mode=this.enumMode.IN},ZIMT.UTILS.PaginationManager.prototype.__isSinglePage=function(){return 1==this.__nrPages},ZIMT.UTILS.PaginationManager.prototype.onEV=function(t,e){"up"===t?this.up():"down"==t?this.down():"set"==t&&this.set(e)};var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.SortManager=function(t){this.__list={},this.__arrSA=t,this.__lang="",this.__langPoss={en:"_collen",de:"_collger",da:"_collda"}},ZIMT.UTILS.SortManager.prototype.__isItemSA=function(t){return this.__list.hasOwnProperty(t)},ZIMT.UTILS.SortManager.prototype.init=function(t){var e=0;for(this.__lang=this.checkLanguage(t),e=0;e<this.__arrSA.length;e++)this.setSA(this.__arrSA[e])},ZIMT.UTILS.SortManager.prototype.setSA=function(t){var e=t[0];return!this.__isItemSA(e)&&(this.__list[e]={},this.__list[e].on=!1,this.__list[e].order="asc",this.__list[e].name=e,this.__list[e].type=t[1],!0)},ZIMT.UTILS.SortManager.prototype.getSAData=function(t){var e,i={};return this.__isItemSA(t)?(e=this.__list[t],i.sa=!0,i.on=e.on,i.order=e.order,i.name=e.name):i.sa=!1,i},ZIMT.UTILS.SortManager.prototype.toggleOrder=function(t){return this.__isItemSA(t)?void("asc"==this.getOrder(t)?this.setOrder(t,"desc"):this.setOrder(t,"asc")):(console.log(t+"existiert nicht!"),!1)},ZIMT.UTILS.SortManager.prototype.toggleItem=function(t){return this.__isItemSA(t)?void(this.isItemOn(t)?this.unsetAll():(this.unsetAll(),this.setItem(t))):(console.log(t+"existiert nicht!"),!1)},ZIMT.UTILS.SortManager.prototype.unsetAll=function(){var t=0;for(t=0;t<this.__arrSA.length;t++)this.unsetItem(this.__arrSA[t][0]),this.setOrder(this.__arrSA[t][0],"asc")},ZIMT.UTILS.SortManager.prototype.isItemOn=function(t){return this.__isItemSA(t)?!!this.__list[t].on:(console.log(t+"existiert nicht!"),!1)},ZIMT.UTILS.SortManager.prototype.setItem=function(t){this.__isItemSA(t)?this.__list[t].on=!0:console.log(t+"existiert nicht!")},ZIMT.UTILS.SortManager.prototype.unsetItem=function(t){this.__isItemSA(t)?this.__list[t].on=!1:console.log(t+"existiert nicht!")},ZIMT.UTILS.SortManager.prototype.setOrder=function(t,e){this.__list[t].order=e},ZIMT.UTILS.SortManager.prototype.getOrder=function(t){return this.__list[t].order},ZIMT.UTILS.SortManager.prototype.getType=function(t){return this.__list[t].type},ZIMT.UTILS.SortManager.prototype.getSortFieldName=function(t){var e=t;return"str"==this.getType(t)&&(e+=this.__langPoss[this.__lang]),e},ZIMT.UTILS.SortManager.prototype.getSortQuery=function(){var t=!1,e="&sort=",i=Object.keys(this.__list),r=0;for(r=0;r<i.length;r++)this.isItemOn(i[r])&&(e+=this.getSortFieldName(i[r])+" "+this.__list[i[r]].order,t=!0);return t?e+=",score desc":""},ZIMT.UTILS.SortManager.prototype.getSort=function(){var t=!1,e=Object.keys(this.__list),r={};for(i=0;i<e.length;i++)this.isItemOn(e[i])&&(r.name=this.__list[e[i]].name,r.order=this.__list[e[i]].order,t=!0);return!!t&&r},ZIMT.UTILS.SortManager.prototype.checkLanguage=function(t){return this.__langPoss.hasOwnProperty(t)?t:(console.log("Error: unconfigured language in use."),"de")},ZIMT.UTILS.SortManager.prototype.serializeData=function(){console.log(JSON.stringify(this.__list))};var ZIMT=ZIMT||{};ZIMT.UTILS=ZIMT.UTILS||{},ZIMT.UTILS.Lang=function(){this.__lang="",this.__htLang={},this.__htLangFallback={},this.__htColl={},this.__htCollFallback={},this.__htInst={},this.__htInstFallback={},this.__htDep={},this.__htDepFallback={},this.__htMed={},this.__htMedFallback={},this.__htType={},this.__htTypeFallback={},this.__htTemp={},this.__htTempFallback={}},ZIMT.UTILS.Lang.prototype.init=function(t){this.__lang=t,this.__htLangFallback=ZIMT.DATA.StartValues.strLangDe,this.__htCollFallback=ZIMT.DATA.StartValues.strCollDe,this.__htInstFallback=ZIMT.DATA.StartValues.strInstDe,this.__htDepFallback=ZIMT.DATA.StartValues.strDepDe,this.__htMedFallback=ZIMT.DATA.StartValues.strMedDe,this.__htTypeFallback=ZIMT.DATA.StartValues.strTypeDe,this.__htTempFallback=ZIMT.DATA.StartValues.strTempDe,this.__linkHashTables()},ZIMT.UTILS.Lang.prototype.__linkHashTables=function(){"de"==this.__lang?(this.__htLang=ZIMT.DATA.StartValues.strLangDe,this.__htColl=ZIMT.DATA.StartValues.strCollDe,this.__htInst=ZIMT.DATA.StartValues.strInstDe,this.__htDep=ZIMT.DATA.StartValues.strDepDe,this.__htMed=ZIMT.DATA.StartValues.strMedDe,this.__htType=ZIMT.DATA.StartValues.strTypeDe,this.__htTemp=ZIMT.DATA.StartValues.strTempDe):"en"==this.__lang?(this.__htLang=ZIMT.DATA.StartValues.strLangEn,this.__htColl=ZIMT.DATA.StartValues.strCollEn,this.__htInst=ZIMT.DATA.StartValues.strInstEn,this.__htDep=ZIMT.DATA.StartValues.strDepEn,this.__htMed=ZIMT.DATA.StartValues.strMedEn,this.__htType=ZIMT.DATA.StartValues.strTypeEn,this.__htTemp=ZIMT.DATA.StartValues.strTempEn):console.log("ERROR: NO LANGUAGE SELECTED!")},ZIMT.UTILS.Lang.prototype.__replace=function(t,e,i){return e[t]?e[t]:i[t]?1==ZIMT.DATA.DefaultValues.Debug?i[t]+" -- ERROR: english resource missing":i[t]:1==ZIMT.DATA.DefaultValues.Debug?t+" -- ERROR: translation missing":t},ZIMT.UTILS.Lang.prototype.mkDisplayname=function(t,e){return"dc_language"==t?this.__replace(e,this.__htLang,this.__htLangFallback):"dct_isPartOf"==t?this.__replace(e,this.__htColl,this.__htCollFallback):"dc_publisher"==t?this.__replace(e,this.__htInst,this.__htInstFallback):"dc_contributor"==t?this.__replace(e,this.__htDep,this.__htDepFallback):"dct_medium"==t?this.__replace(e,this.__htMed,this.__htMedFallback):"dc_type"==t?this.__replace(e,this.__htType,this.__htTypeFallback):"dct_temporal"==t?this.__replace(e,this.__htTemp,this.__htTempFallback):e},ZIMT.UTILS.Lang.prototype.getLang=function(){return this.__lang},ZIMT.UTILS.Lang.prototype.debug=function(t,e){console.log("debuging ZIMT.UTILS.Lang"),console.log(this.__lang),console.log(this.mkDisplayname("dc_language","deu")),console.log(this.mkDisplayname("dc_language","ita"))};